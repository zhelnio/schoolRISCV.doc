
# План практического занятия

## Вводная часть

1. Список ПО
    - симулятор RISC-V (RARS)
    - toolchain (gnu gcc, ...)
    - симулятор (Modelsim, Icarus Verilog)
    - средства синтеза RTL (Quartus)

    <!-- Вам может показаться, что использование этих утилит сложнее, чем проектирование процессора. Каждая из них - это отдельная тема. Текущая практика - это тропинка в лесу -->

1. Обновить код
    - git pull
    - download actual schoolRISCV

1. Экскурсия по каталогам
    - program
    - src
    - testbench
    - install
    - board

1. Общий порядок сборки и запуска
    - симуляция в RARS
    - запуск симуляции в Modelsim
    - запуск симуляции в iverilog
    - экспорт .hex в board/program
    - создание и сборка проекта в GUI
    - прошивка платы

1. Работа с переключателями на плате
1. Задание на самостоятельный запуск примера 2
    - в RARS
    - в симуляторе
    - на плате

## Разбор симуляции

1. make
    - система сборки - скрипты автоматизирующие преобразование одних файлов в другие
    - при запуске ищет в текущем каталоге файл Makefile

1. Описание Makefile для сборки программы
    - что такое target (цель), связь с файлами
    - каждая цель - это просто набор команд
    - показать make -n
    - цели могут зависеть друг от друга
    - make отслеживает даты изменения файлов
    - внутри Makefile доступны переменные окружения, и их можно задавать снаружи
    - modelsim (и других утилиты) используют свой язык скриптов: tcl - tool command language
    - показать, чем удобно именно использование tcl
    - симуляция в Icarus

1. Описание testbench (тестовое окружение)
    - минусы сборки на ПЛИС: долгий синтез, сложно смотреть сигналы внутри дизайна
    - не синтезируемое подмножество языка
    - пройти по всему TB

## Разбор синтеза

1. Описание Makefile для сборки bitstream
    - пройти по всем целям
    - показать использование переменной окружения PROJECT_DIR извне

## Использование toolchain

1. Makefile с toolchain
    - взять common/Makefile
    - запуск make build
    - разбор каждой из выполняемых команд
        - gcc
        - linker script
        - objdump
        - objcopy
        - конвертация hex8 в hex32
